var Benchmark = require('benchmark'),
    suite = new Benchmark.Suite(),
    loadVT = require('../index'),
    polyline = require('polyline');

suite.add({
    defer: true,
    name: 'polyline',
    fn: function(deferred) {
        var p = decodeURIComponent('w_pfFt%60elVq%40BaBhBc%40z%40ElAP~%40Qt%40ObAg%40fAU~AW%60Am%40TeAc%40%7D%40BGq%40Dv%40n%40Z~%40Zx%40bATzAMxA%5BpAQtAW%7CAGxA%7B%40rCw%40e%40%7B%40U%7B%40LYnADnAzBvA%5CdAWjAaBlBEhAOrAMnDYnDKpA%5DhAItAFrAJtAQtA%7B%40bAiALg%40%7D%40e%40kAaA_%40_ASeABm%40m%40e%40_AoBkAEhANpDx%40v%40HvAA~A%5DhAm%40k%40MuAsBgAy%40L_AQPeGCqAi%40gAA_ABqA_%40mAc%40s%40m%40u%40_Ag%40_A%40%7B%40K%7B%40Wu%40c%40q%40Y_AM%7B%40W%7D%40Hy%40MaAWs%40i%40_AFm%40r%40y%40n%40sBfAy%40%5Cy%40d%40%7DBdA_A%5C_ANaAJ%7B%40Zw%40l%40yAtBc%40dAQnAYbAm%40r%40c%40hAoAdF%5DlA%5BrA%5D~%40c%40dAQnABrAApANdAItAHhATfATlAl%40z%40j%40~%40%7CAbFNjANhDYjAWjA%40nAFjA_AhCWdAc%40bAu%40p%40g%40~%40%5DdAg%40bA%7B%40%7CC_%40dAc%40xAWtAKrA%5EfAAt%40Cl%40YxAC%7CCGpAPlA~%40dCj%40x%40lApAYp%40k%40n%40s%40l%40s%40NW%7C%40WZEt%40g%40l%40Ff%40RN%60ABXWLEHNKAE%5C_%40Gs%40JI%5BMPI_%40Bw%40d%40%5DNu%40ZaAn%40_%40t%40Uj%40s%40Xm%40Yo%40%5Bi%40_%40iAa%40%7D%40g%40%7B%40%5BmAAcDHoA%40sAf%40w%40YgAMoANsAt%40_D%60%40cAVmA%5CcAf%40gAh%40%7D%40TgAr%40e%40h%40y%40ZeAViAf%40q%40KwAj%40mDJkACwA%5DiDe%40cA_%40oAm%40iAo%40%7D%40MkA_%40wAYyAJuAK%7DFNsA%60%40aAf%40uCn%40wCPqA%60%40iAf%40cAr%40w%40%5CiANkAXgAj%40%7B%40f%40cA%7C%40_%40~%40_%40xBg%40%7C%40Qv%40c%40z%40Y%7C%40c%40r%40e%40z%40_%40x%40g%40%7C%40a%40l%40%7B%40t%40Y%60C%7C%40x%40%5EbAQx%40H%7C%40N~%40B%5CfA%60A%3FtBd%40%60AFz%40Vt%40f%40NlABjAKpAh%40x%40XfAM~COpA%40hAz%40d%40~%40Wz%40j%40t%40j%40NhAv%40ZPiA%40wAIsAu%40q%40%3FwAKsA%3FiA%5Ct%40bC~%40n%40l%40z%40J~%40%5Cp%40h%40h%40%7C%40l%40x%40%60AE%7C%40k%40TiADuAWmACwAPkAZiATsAN%7DC%40gDXoADcA~AoBZkAWiAu%40i%40y%40%5D_%40mATiAp%40s%40z%40Pz%40Zn%40YJmALsAAiA%5CgATeARgANoAKsAm%40_Au%40i%40_A_%40c%40m%40zBG%60ABt%40u%40dA%7DCJsAOoA%40sAj%40y%40t%40g%40p%40o%40');
        loadVT('local', 'polyline', p, function(err, res) {
            deferred.resolve();
        });
    }
}).add({
    defer: true,
    name: 'literal',
    fn: function(deferred) {
        var pts = [[37.9342,-122.74715],[37.93445,-122.74717],[37.93494,-122.7477],[37.93512,-122.748],[37.93515,-122.74839],[37.93506,-122.74871],[37.93515,-122.74898],[37.93523,-122.74932],[37.93543,-122.74968],[37.93554,-122.75016],[37.93566,-122.75049],[37.93589,-122.7506],[37.93624,-122.75042],[37.93655,-122.75044],[37.93659,-122.75019],[37.93656,-122.75047],[37.93632,-122.75061],[37.936,-122.75075],[37.93571,-122.75109],[37.9356,-122.75155],[37.93567,-122.752],[37.93581,-122.75241],[37.9359,-122.75284],[37.93602,-122.75331],[37.93606,-122.75376],[37.93636,-122.7545],[37.93664,-122.75431],[37.93694,-122.7542],[37.93724,-122.75427],[37.93737,-122.75467],[37.93734,-122.75507],[37.93672,-122.75551],[37.93657,-122.75586],[37.93669,-122.75624],[37.93718,-122.75679],[37.93721,-122.75716],[37.93729,-122.75758],[37.93736,-122.75846],[37.93749,-122.75934],[37.93755,-122.75975],[37.9377,-122.76012],[37.93775,-122.76055],[37.93771,-122.76097],[37.93765,-122.7614],[37.93774,-122.76183],[37.93804,-122.76217],[37.93841,-122.76224],[37.93861,-122.76193],[37.9388,-122.76155],[37.93913,-122.76139],[37.93945,-122.76129],[37.9398,-122.76131],[37.94003,-122.76108],[37.94022,-122.76076],[37.94078,-122.76038],[37.94081,-122.76075],[37.94073,-122.76164],[37.94044,-122.76192],[37.94039,-122.76236],[37.9404,-122.76284],[37.94055,-122.76321],[37.94078,-122.76299],[37.94085,-122.76256],[37.94143,-122.7622],[37.94172,-122.76227],[37.94204,-122.76218],[37.94195,-122.76087],[37.94197,-122.76046],[37.94218,-122.7601],[37.94219,-122.75978],[37.94217,-122.75937],[37.94233,-122.75898],[37.94251,-122.75872],[37.94274,-122.75845],[37.94306,-122.75825],[37.94338,-122.75826],[37.94368,-122.7582],[37.94398,-122.75808],[37.94425,-122.7579],[37.9445,-122.75777],[37.94482,-122.7577],[37.94512,-122.75758],[37.94543,-122.75763],[37.94572,-122.75756],[37.94605,-122.75744],[37.94631,-122.75723],[37.94663,-122.75727],[37.94686,-122.75753],[37.94715,-122.75777],[37.94773,-122.75813],[37.94802,-122.75828],[37.94831,-122.75847],[37.94894,-122.75882],[37.94926,-122.75897],[37.94958,-122.75905],[37.94991,-122.75911],[37.95021,-122.75925],[37.95049,-122.75948],[37.95094,-122.76007],[37.95112,-122.76042],[37.95121,-122.76082],[37.95134,-122.76116],[37.95157,-122.76142],[37.95175,-122.76179],[37.95215,-122.76294],[37.9523,-122.76333],[37.95244,-122.76375],[37.95259,-122.76407],[37.95277,-122.76442],[37.95286,-122.76482],[37.95284,-122.76524],[37.95285,-122.76565],[37.95277,-122.766],[37.95282,-122.76643],[37.95277,-122.7668],[37.95266,-122.76716],[37.95255,-122.76755],[37.95232,-122.76785],[37.9521,-122.76817],[37.95163,-122.76931],[37.95155,-122.76969],[37.95147,-122.77054],[37.9516,-122.77092],[37.95172,-122.7713],[37.95171,-122.7717],[37.95167,-122.77208],[37.95199,-122.77277],[37.95211,-122.77312],[37.95229,-122.77346],[37.95256,-122.77371],[37.95276,-122.77403],[37.95291,-122.77438],[37.95311,-122.77472],[37.95341,-122.77551],[37.95357,-122.77586],[37.95375,-122.77631],[37.95387,-122.77674],[37.95393,-122.77716],[37.95377,-122.77752],[37.95378,-122.77779],[37.9538,-122.77802],[37.95393,-122.77847],[37.95395,-122.77926],[37.95399,-122.77967],[37.9539,-122.78006],[37.95358,-122.78073],[37.95336,-122.78102],[37.95297,-122.78143],[37.9531,-122.78168],[37.95332,-122.78192],[37.95358,-122.78215],[37.95384,-122.78223],[37.95396,-122.78254],[37.95408,-122.78268],[37.95411,-122.78295],[37.95431,-122.78318],[37.95427,-122.78338],[37.95417,-122.78346],[37.95384,-122.78348],[37.95371,-122.78336],[37.95364,-122.78333],[37.95359,-122.78341],[37.95365,-122.7834],[37.95368,-122.78355],[37.95384,-122.78351],[37.9541,-122.78357],[37.95415,-122.78343],[37.95422,-122.78352],[37.95427,-122.78336],[37.95425,-122.78308],[37.95406,-122.78293],[37.95398,-122.78266],[37.95384,-122.78233],[37.9536,-122.78217],[37.95333,-122.78206],[37.95311,-122.7818],[37.95298,-122.78157],[37.95311,-122.78133],[37.95325,-122.78112],[37.95341,-122.78075],[37.95358,-122.78044],[37.95378,-122.78014],[37.95392,-122.77975],[37.95393,-122.77893],[37.95388,-122.77853],[37.95387,-122.77811],[37.95367,-122.77783],[37.9538,-122.77747],[37.95387,-122.77707],[37.95379,-122.77665],[37.95352,-122.77585],[37.95335,-122.77551],[37.95323,-122.77512],[37.95308,-122.77478],[37.95288,-122.77442],[37.95267,-122.77411],[37.95256,-122.77375],[37.9523,-122.77356],[37.95209,-122.77327],[37.95195,-122.77292],[37.95183,-122.77255],[37.95163,-122.7723],[37.95169,-122.77186],[37.95147,-122.77099],[37.95141,-122.77061],[37.95143,-122.77017],[37.95158,-122.76932],[37.95177,-122.76898],[37.95193,-122.76858],[37.95216,-122.76821],[37.9524,-122.7679],[37.95247,-122.76752],[37.95263,-122.76708],[37.95276,-122.76663],[37.9527,-122.7662],[37.95276,-122.76493],[37.95268,-122.76451],[37.95251,-122.76418],[37.95231,-122.76343],[37.95207,-122.76267],[37.95198,-122.76226],[37.95181,-122.76189],[37.95161,-122.76155],[37.95135,-122.76127],[37.9512,-122.7609],[37.95112,-122.76052],[37.95099,-122.76016],[37.95077,-122.75986],[37.95057,-122.75952],[37.95026,-122.75936],[37.94994,-122.7592],[37.94933,-122.759],[37.94902,-122.75891],[37.94874,-122.75873],[37.94844,-122.7586],[37.94813,-122.75842],[37.94787,-122.75823],[37.94757,-122.75807],[37.94728,-122.75787],[37.94697,-122.7577],[37.94674,-122.7574],[37.94647,-122.75727],[37.94582,-122.75758],[37.94553,-122.75774],[37.94519,-122.75765],[37.9449,-122.7577],[37.94459,-122.75778],[37.94427,-122.7578],[37.94412,-122.75816],[37.94379,-122.75816],[37.9432,-122.75835],[37.94287,-122.75839],[37.94257,-122.75851],[37.9423,-122.75871],[37.94222,-122.7591],[37.9422,-122.75948],[37.94226,-122.75989],[37.94205,-122.76018],[37.94192,-122.76054],[37.94199,-122.76134],[37.94207,-122.76175],[37.94206,-122.76212],[37.94176,-122.76231],[37.94144,-122.76219],[37.94114,-122.76241],[37.94087,-122.76263],[37.94079,-122.763],[37.94051,-122.76314],[37.94042,-122.76277],[37.94041,-122.76233],[37.94046,-122.76191],[37.94073,-122.76166],[37.94073,-122.76122],[37.94079,-122.7608],[37.94079,-122.76043],[37.94064,-122.7607],[37.93998,-122.76102],[37.93974,-122.76125],[37.93944,-122.76131],[37.93912,-122.76146],[37.93887,-122.76167],[37.93866,-122.76198],[37.93843,-122.76227],[37.9381,-122.76224],[37.93779,-122.76202],[37.93768,-122.76165],[37.93765,-122.76122],[37.93777,-122.76083],[37.93779,-122.76039],[37.9377,-122.76001],[37.93756,-122.75964],[37.93745,-122.75922],[37.93737,-122.75843],[37.93736,-122.75759],[37.93723,-122.75719],[37.9372,-122.75685],[37.93672,-122.75629],[37.93658,-122.75591],[37.9367,-122.75554],[37.93697,-122.75533],[37.93726,-122.75518],[37.93742,-122.75479],[37.93731,-122.75442],[37.93706,-122.75416],[37.93676,-122.75425],[37.93646,-122.75439],[37.93622,-122.75426],[37.93616,-122.75387],[37.93609,-122.75345],[37.9361,-122.75308],[37.93595,-122.75272],[37.93584,-122.75237],[37.93574,-122.75201],[37.93566,-122.75161],[37.93572,-122.75119],[37.93595,-122.75087],[37.93622,-122.75066],[37.93654,-122.7505],[37.93672,-122.75027],[37.9361,-122.75023],[37.93577,-122.75025],[37.9355,-122.74998],[37.93515,-122.74919],[37.93509,-122.74877],[37.93517,-122.74837],[37.93516,-122.74795],[37.93494,-122.74766],[37.93467,-122.74746],[37.93442,-122.74722]];
        loadVT('local', 'literal', pts, function(err, res) {
            deferred.resolve();
        });
    }
}).add({
    defer: true,
    name: 'path',
    fn: function(deferred) {
        var path = '-122.74715,37.9342;-122.74717,37.93445;-122.7477,37.93494;-122.748,37.93512;-122.74839,37.93515;-122.74871,37.93506;-122.74898,37.93515;-122.74932,37.93523;-122.74968,37.93543;-122.75016,37.93554;-122.75049,37.93566;-122.7506,37.93589;-122.75042,37.93624;-122.75044,37.93655;-122.75019,37.93659;-122.75047,37.93656;-122.75061,37.93632;-122.75075,37.936;-122.75109,37.93571;-122.75155,37.9356;-122.752,37.93567;-122.75241,37.93581;-122.75284,37.9359;-122.75331,37.93602;-122.75376,37.93606;-122.7545,37.93636;-122.75431,37.93664;-122.7542,37.93694;-122.75427,37.93724;-122.75467,37.93737;-122.75507,37.93734;-122.75551,37.93672;-122.75586,37.93657;-122.75624,37.93669;-122.75679,37.93718;-122.75716,37.93721;-122.75758,37.93729;-122.75846,37.93736;-122.75934,37.93749;-122.75975,37.93755;-122.76012,37.9377;-122.76055,37.93775;-122.76097,37.93771;-122.7614,37.93765;-122.76183,37.93774;-122.76217,37.93804;-122.76224,37.93841;-122.76193,37.93861;-122.76155,37.9388;-122.76139,37.93913;-122.76129,37.93945;-122.76131,37.9398;-122.76108,37.94003;-122.76076,37.94022;-122.76038,37.94078;-122.76075,37.94081;-122.76164,37.94073;-122.76192,37.94044;-122.76236,37.94039;-122.76284,37.9404;-122.76321,37.94055;-122.76299,37.94078;-122.76256,37.94085;-122.7622,37.94143;-122.76227,37.94172;-122.76218,37.94204;-122.76087,37.94195;-122.76046,37.94197;-122.7601,37.94218;-122.75978,37.94219;-122.75937,37.94217;-122.75898,37.94233;-122.75872,37.94251;-122.75845,37.94274;-122.75825,37.94306;-122.75826,37.94338;-122.7582,37.94368;-122.75808,37.94398;-122.7579,37.94425;-122.75777,37.9445;-122.7577,37.94482;-122.75758,37.94512;-122.75763,37.94543;-122.75756,37.94572;-122.75744,37.94605;-122.75723,37.94631;-122.75727,37.94663;-122.75753,37.94686;-122.75777,37.94715;-122.75813,37.94773;-122.75828,37.94802;-122.75847,37.94831;-122.75882,37.94894;-122.75897,37.94926;-122.75905,37.94958;-122.75911,37.94991;-122.75925,37.95021;-122.75948,37.95049;-122.76007,37.95094;-122.76042,37.95112;-122.76082,37.95121;-122.76116,37.95134;-122.76142,37.95157;-122.76179,37.95175;-122.76294,37.95215;-122.76333,37.9523;-122.76375,37.95244;-122.76407,37.95259;-122.76442,37.95277;-122.76482,37.95286;-122.76524,37.95284;-122.76565,37.95285;-122.766,37.95277;-122.76643,37.95282;-122.7668,37.95277;-122.76716,37.95266;-122.76755,37.95255;-122.76785,37.95232;-122.76817,37.9521;-122.76931,37.95163;-122.76969,37.95155;-122.77054,37.95147;-122.77092,37.9516;-122.7713,37.95172;-122.7717,37.95171;-122.77208,37.95167;-122.77277,37.95199;-122.77312,37.95211;-122.77346,37.95229;-122.77371,37.95256;-122.77403,37.95276;-122.77438,37.95291;-122.77472,37.95311;-122.77551,37.95341;-122.77586,37.95357;-122.77631,37.95375;-122.77674,37.95387;-122.77716,37.95393;-122.77752,37.95377;-122.77779,37.95378;-122.77802,37.9538;-122.77847,37.95393;-122.77926,37.95395;-122.77967,37.95399;-122.78006,37.9539;-122.78073,37.95358;-122.78102,37.95336;-122.78143,37.95297;-122.78168,37.9531;-122.78192,37.95332;-122.78215,37.95358;-122.78223,37.95384;-122.78254,37.95396;-122.78268,37.95408;-122.78295,37.95411;-122.78318,37.95431;-122.78338,37.95427;-122.78346,37.95417;-122.78348,37.95384;-122.78336,37.95371;-122.78333,37.95364;-122.78341,37.95359;-122.7834,37.95365;-122.78355,37.95368;-122.78351,37.95384;-122.78357,37.9541;-122.78343,37.95415;-122.78352,37.95422;-122.78336,37.95427;-122.78308,37.95425;-122.78293,37.95406;-122.78266,37.95398;-122.78233,37.95384;-122.78217,37.9536;-122.78206,37.95333;-122.7818,37.95311;-122.78157,37.95298;-122.78133,37.95311;-122.78112,37.95325;-122.78075,37.95341;-122.78044,37.95358;-122.78014,37.95378;-122.77975,37.95392;-122.77893,37.95393;-122.77853,37.95388;-122.77811,37.95387;-122.77783,37.95367;-122.77747,37.9538;-122.77707,37.95387;-122.77665,37.95379;-122.77585,37.95352;-122.77551,37.95335;-122.77512,37.95323;-122.77478,37.95308;-122.77442,37.95288;-122.77411,37.95267;-122.77375,37.95256;-122.77356,37.9523;-122.77327,37.95209;-122.77292,37.95195;-122.77255,37.95183;-122.7723,37.95163;-122.77186,37.95169;-122.77099,37.95147;-122.77061,37.95141;-122.77017,37.95143;-122.76932,37.95158;-122.76898,37.95177;-122.76858,37.95193;-122.76821,37.95216;-122.7679,37.9524;-122.76752,37.95247;-122.76708,37.95263;-122.76663,37.95276;-122.7662,37.9527;-122.76493,37.95276;-122.76451,37.95268;-122.76418,37.95251;-122.76343,37.95231;-122.76267,37.95207;-122.76226,37.95198;-122.76189,37.95181;-122.76155,37.95161;-122.76127,37.95135;-122.7609,37.9512;-122.76052,37.95112;-122.76016,37.95099;-122.75986,37.95077;-122.75952,37.95057;-122.75936,37.95026;-122.7592,37.94994;-122.759,37.94933;-122.75891,37.94902;-122.75873,37.94874;-122.7586,37.94844;-122.75842,37.94813;-122.75823,37.94787;-122.75807,37.94757;-122.75787,37.94728;-122.7577,37.94697;-122.7574,37.94674;-122.75727,37.94647;-122.75758,37.94582;-122.75774,37.94553;-122.75765,37.94519;-122.7577,37.9449;-122.75778,37.94459;-122.7578,37.94427;-122.75816,37.94412;-122.75816,37.94379;-122.75835,37.9432;-122.75839,37.94287;-122.75851,37.94257;-122.75871,37.9423;-122.7591,37.94222;-122.75948,37.9422;-122.75989,37.94226;-122.76018,37.94205;-122.76054,37.94192;-122.76134,37.94199;-122.76175,37.94207;-122.76212,37.94206;-122.76231,37.94176;-122.76219,37.94144;-122.76241,37.94114;-122.76263,37.94087;-122.763,37.94079;-122.76314,37.94051;-122.76277,37.94042;-122.76233,37.94041;-122.76191,37.94046;-122.76166,37.94073;-122.76122,37.94073;-122.7608,37.94079;-122.76043,37.94079;-122.7607,37.94064;-122.76102,37.93998;-122.76125,37.93974;-122.76131,37.93944;-122.76146,37.93912;-122.76167,37.93887;-122.76198,37.93866;-122.76227,37.93843;-122.76224,37.9381;-122.76202,37.93779;-122.76165,37.93768;-122.76122,37.93765;-122.76083,37.93777;-122.76039,37.93779;-122.76001,37.9377;-122.75964,37.93756;-122.75922,37.93745;-122.75843,37.93737;-122.75759,37.93736;-122.75719,37.93723;-122.75685,37.9372;-122.75629,37.93672;-122.75591,37.93658;-122.75554,37.9367;-122.75533,37.93697;-122.75518,37.93726;-122.75479,37.93742;-122.75442,37.93731;-122.75416,37.93706;-122.75425,37.93676;-122.75439,37.93646;-122.75426,37.93622;-122.75387,37.93616;-122.75345,37.93609;-122.75308,37.9361;-122.75272,37.93595;-122.75237,37.93584;-122.75201,37.93574;-122.75161,37.93566;-122.75119,37.93572;-122.75087,37.93595;-122.75066,37.93622;-122.7505,37.93654;-122.75027,37.93672;-122.75023,37.9361;-122.75025,37.93577;-122.74998,37.9355;-122.74919,37.93515;-122.74877,37.93509;-122.74837,37.93517;-122.74795,37.93516;-122.74766,37.93494;-122.74746,37.93467;-122.74722,37.93442';
        loadVT('local', 'path', path, function(err, res) {
            deferred.resolve();
        });
    }
})
.on('cycle', function(event) {
  console.log(String(event.target));
})
.on('complete', function() {
  console.log('Fastest is ' + this.filter('fastest').pluck('name'));
})
.run({ 'async': true });
